<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Big Brother Fantasy Draft</title>
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(to bottom, #001f3f, #0074D9);
            color: white;
        }
        .nav-link, .btn, .table, .form-control {
            color: white;
            background-color: transparent;
        }
        .nav-link.active {
            background-color: #00509E;
            color: white;
        }
        .table th, .table td {
            background-color: rgba(0, 0, 0, 0.6);
        }
        .form-control {
            background-color: rgba(255, 255, 255, 0.2);
            border: 1px solid white;
        }
        #chat-box {
            background-color: rgba(0, 0, 0, 0.6);
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1>Big Brother Fantasy Draft</h1>
        <ul class="nav nav-tabs" id="mainTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Home</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="graphs-tab" data-toggle="tab" href="#graphs" role="tab" aria-controls="graphs" aria-selected="false">Graphs</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="data-tab" data-toggle="tab" href="#data" role="tab" aria-controls="data" aria-selected="false">Data</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="leaderboard-tab" data-toggle="tab" href="#leaderboard" role="tab" aria-controls="leaderboard" aria-selected="false">Leaderboard</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="logs-tab" data-toggle="tab" href="#logs" role="tab" aria-controls="logs" aria-selected="false">Logs</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="chat-tab" data-toggle="tab" href="#chat" role="tab" aria-controls="chat" aria-selected="false">Chat</a>
            </li>
        </ul>
        <div class="tab-content" id="mainTabContent">
            <!-- Home Tab -->
            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                <div class="mt-3">
                    <h2>Welcome to the Big Brother Draft!</h2>
                    <p>For those of you that have played in the past, this is essentially the same game that we have played for the last couple of years, I just developed this website in order to make the game more user-friendly. The point calculations are the exact same as last year, but feel free to review that section below!</p>
                    <p>For those of you who are new this year: this is a Fantasy Football-style draft for the game show 'Big Brother.' To play, all you need to do is look at the list of contestants on this year's Big Brother, order ALL of the contestants from who you think is most likely to win to who you think is least likely to win (see point scoring below for more details), and send me the list (preferably by phone: 617-999-8985). Then send $20 to my venmo (@rclavey), winner takes all! When sending your list, also let me know if you're interested in being included in a group chat or not. When I get a final number for the amount of people playing this year you will be able to find it here along with the pot total. In the event of a tie, anyone who is tied for first will split the pot evenly, although this hasn't happened yet.</p>
                    <p>That's it! That's all you need to do, however I'll make a group chat for those interested in talking about the game, and there are three episodes per week you can watch to stay up-to-date. I am also expirementing with a chat feature on this website you can feel free to checkout. I will do my very best to update this website after each and every episode, however, I am running this by myself so I apologize in advance if I fall behind at all. To ensure the game is fair and for the sake of transparency, I have this code posted on my github, (https://github.com/rclavey/git_hub/tree/master/big_brother). Feel free to check the code and bring any issues to my attention, it's mostly in Python. The code is private so just shoot me a text before looking at it so I can give you access.</p>
                    <p>The cast can be found at several websites, here is one: <a href="https://bigbrother.fandom.com/wiki/Big_Brother_26_(US)" target="_blank">Big Brother 25 Cast Photos</a></p>
                    <p>On this website you will find the Home page (the page you're on now), the Graphs page, the Data page, the Leaderboard page, the Log page, and the Chat page. The Graphs page will have a graph for everyone's current points in order of most to least as well as a points over time graph that has everybody's points graphed week over week. The data page will have everyone's picks, the points everyone has every week, and the winners of all the competitions inside the Big Brother House. The Leaderboard page will have a leaderboard with everyone's name and current points. The Log Page will have detailed statements explaining why every player lost/gained the points they did each week. The Chat page will have the chat feature, however, there are likely to be bugs with the chat feature because this is my first time working with a live chat feature on a website.  </p>
                    <h3>Point Scoring:</h3>
                    <ol>
                        <li>Every time someone wins Head of Household you will be awarded points based on the following formula: 10 - ranking. Ranking is the order you picked the contestant in with '0' being your favorite player and '15' being your least favorite.</li>
                        <li>Every time someone wins The Veto Competition they will be awarded points based on the following formula: 10 - ranking.</li>
                        <li>Every time someone gets off the block (by any means, whether they were veto holder or not, or if there was a twist) they will be awarded points based off the following formula: 7.5 - 0.75 * ranking.</li>
                        <li>Anytime a player wins a competition not otherwise mentioned here they will be awarded points based off the following formula: 5 - 0.5 * ranking.</li>
                        <li>In the event a houseguest is evicted from the house, and then returns to play they will be awarded points based on the following formula: 10 - ranking. If the houseguest won a competition to be brought back to the game, points will be awarded for the other competition as well as being brought back to the game.</li>
                        <li>If you perfectly predict the order in which everyone was evicted in your list, you will be awarded 100 points.</li>
                        <li>If America's Favorite is your first, second, or third ranked houseguest, you will be awarded 75, 50, or 25 points respectively. If they are your sixteenth, fifteenth, or fourteenth choice 50, 25, or 10 points will be subtracted respectively.</li>
                        <li>If the winner of the game was your first, second, or third ranked houseguest, you will be awarded 100, 75, or 50 points respectively. If the winner was your sixteenth, fifteenth, or fourteenth ranked houseguest, 75, 50, or 25 points will be subtracted respectively.</li>
                        <li>If the runner-up of the game was your first, second, or third ranked houseguest, you will be awarded 75, 50, or 25 points respectively. If the runner-up of the game was your sixteenth, fifteenth, or fourteenth ranked houseguest, 50, 25, or 10 points will be subtracted respectively.</li>
                        <li>If the third place houseguest was your first, second, or third ranked houseguest, you will be awarded 50, 25, or 10 points respectively. If the winner was your sixteenth, fifteenth, or fourteenth ranked houseguest, 25, 10, or 5 points will be subtracted respectively. Please note that although the third place houseguest may be known an episode before the winner and runner up, the points for the top three places, America's Favorite, and the perfect line-up will all be awarded at the same time.</li>
                    </ol>
                    <h3>Changes from the original game:</h3>
                    <ul>
                        <li>You now get a bonus if your list lines up perfectly with the order of evictions.</li>
                        <li>Now there is only one spot in your list where the houseguest will earn you zero points as opposed to in the last few years where only the top six and bottom four positions would add/subtract points.</li>
                        <li>Getting taken off the block is worth slightly less points.</li>
                        <li>You can now earn points and have points subtracted from an evicted houseguest getting back into the game.</li>
                        <li>America's Favorite is now worth slightly more points.</li>
                    </ul>
                    <p><strong>TL/DR:</strong> Welcome to the Big Brother draft, send a list of your favorite candidates to 617-999-8985 and check out the point scoring system.</p>
                    <p>Thanks everyone for playing!<br><br>Richard Lavey</p>
                </div>
            </div>
            <!-- Graphs Tab -->
            <div class="tab-pane fade" id="graphs" role="tabpanel" aria-labelledby="graphs-tab">
                <div id="carouselGraphs" class="carousel slide mt-3" data-ride="carousel" data-interval="false">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="{{ total_scores_img }}" alt="Total Scores" class="d-block w-100">
                        </div>
                        <div class="carousel-item">
                            <img src="{{ cumulative_scores_img }}" alt="Cumulative Scores" class="d-block w-100">
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#carouselGraphs" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" style="background-color: #505050;" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselGraphs" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" style="background-color: #505050;" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
            <!-- Data Tab -->
            <div class="tab-pane fade" id="data" role="tabpanel" aria-labelledby="data-tab">
                <ul class="nav nav-tabs mt-3" id="dataSubTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="picks-tab" data-toggle="tab" href="#picks" role="tab" aria-controls="picks" aria-selected="true">Picks</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="points-tab" data-toggle="tab" href="#points" role="tab" aria-controls="points" aria-selected="false">Points</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="winners-tab" data-toggle="tab" href="#winners" role="tab" aria-controls="winners" aria-selected="false">Winners</a>
                    </li>
                </ul>
                <div class="tab-content" id="dataSubTabContent">
                    <div class="tab-pane fade show active" id="picks" role="tabpanel" aria-labelledby="picks-tab">
                        <h3 class="mt-3">Picks</h3>
                        <table class="table table-bordered mt-3">
                            <thead>
                                <tr>
                                    {% for header in picks_headers %}
                                    <th>{{ header }}</th>
                                    {% endfor %}
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in picks_data %}
                                <tr>
                                    {% for item in row %}
                                    <td>{{ item }}</td>
                                    {% endfor %}
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane fade" id="points" role="tabpanel" aria-labelledby="points-tab">
                        <h3 class="mt-3">Points</h3>
                        <table class="table table-bordered mt-3">
                            <thead>
                                <tr>
                                    {% for header in points_headers %}
                                    <th>{{ header }}</th>
                                    {% endfor %}
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in points_data %}
                                <tr>
                                    {% for item in row %}
                                    <td>{{ item }}</td>
                                    {% endfor %}
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane fade" id="winners" role="tabpanel" aria-labelledby="winners-tab">
                        <h3 class="mt-3">Winners</h3>
                        <table class="table table-bordered mt-3">
                            <thead>
                                <tr>
                                    {% for header in winners_headers %}
                                    <th>{{ header }}</th>
                                    {% endfor %}
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in winners_data %}
                                <tr>
                                    {% for item in row %}
                                    <td>{{ item }}</td>
                                    {% endfor %}
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Leaderboard Tab -->
            <div class="tab-pane fade" id="leaderboard" role="tabpanel" aria-labelledby="leaderboard-tab">
                <h3 class="mt-3">Leaderboard</h3>
                <table class="table table-bordered mt-3">
                    <thead>
                        <tr>
                            <th>Player</th>
                            <th>Total Points</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for player, points in leaderboard %}
                        <tr>
                            <td>{{ player }}</td>
                            <td>{{ points }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <!-- Logs Tab -->
            <div class="tab-pane fade" id="logs" role="tabpanel" aria-labelledby="logs-tab">
                <h3 class="mt-3">Logs</h3>
                <ul class="nav nav-tabs mt-3" id="logsSubTab" role="tablist">
                    {% for player in player_names %}
                    <li class="nav-item">
                        <a class="nav-link {% if loop.first %}active{% endif %}" id="{{ player }}-logs-tab" data-toggle="tab" href="#{{ player }}-logs" role="tab" aria-controls="{{ player }}-logs" aria-selected="true">{{ player }}</a>
                    </li>
                    {% endfor %}
                </ul>
                <div class="tab-content" id="logsSubTabContent">
                    {% for player in player_names %}
                    <div class="tab-pane fade {% if loop.first %}show active{% endif %}" id="{{ player }}-logs" role="tabpanel" aria-labelledby="{{ player }}-logs-tab">
                        <table class="table table-bordered mt-3">
                            <thead>
                                <tr>
                                    <th>Log</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for log in logs[player] %}
                                <tr>
                                    <td>{{ log }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <!-- Chat Tab -->
            <div class="tab-pane fade" id="chat" role="tabpanel" aria-labelledby="chat-tab">
                <h2 class="mt-3">Chat</h2>
                <div id="chat-box" class="border rounded p-3 mb-3" style="height: 300px; overflow-y: scroll;"></div>
                <input id="message" type="text" class="form-control" placeholder="Type your message here...">
                <button id="send" class="btn btn-primary mt-2">Send</button>
            </div>
        </div>
    </div>
    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <!-- Socket.IO -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            var socket = io.connect('http://' + document.domain + ':' + location.port);

            $('#send').on('click', function(){
                var msg = $('#message').val();
                if (msg) {
                    socket.send(msg);
                    $('#message').val('');
                }
            });

            socket.on('message', function(msg){
                $('#chat-box').append('<div>' + msg + '</div>');
                $('#chat-box').scrollTop($('#chat-box')[0].scrollHeight);
            });
        });
    </script>
</body>
</html>
